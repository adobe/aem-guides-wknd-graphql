{"version":3,"sources":["images/wknd-icon.svg","images/icon-loading.svg","api/aemHeadlessClient.js","api/usePersistedQueries.js","components/Error.js","components/Loading.js","components/Teams.js","components/Home.js","utils/renderRichText.js","components/Person.js","App.js","index.js"],"names":["module","exports","process","REACT_APP_HOST_URI","REACT_APP_GRAPHQL_ENDPOINT","REACT_APP_USE_PROXY","REACT_APP_AUTH_METHOD","REACT_APP_DEV_TOKEN","REACT_APP_BASIC_AUTH_USER","REACT_APP_BASIC_AUTH_PASS","serviceURL","aemHeadlessClient","AEMHeadless","endpoint","auth","fetchPersistedQuery","persistedQueryName","queryParameters","a","runPersistedQuery","response","data","err","toJSON","map","error","message","join","console","Error","className","this","props","errorMessage","Component","Loading","src","loadingIcon","alt","Team","title","shortName","description","teamMembers","plaintext","teamMember","index","key","to","fullName","Teams","useState","teams","setTeams","errors","setErrors","useEffect","teamList","items","fetchData","useAllTeams","team","Home","defaultNodeMap","header","node","children","style","paragraph","table","link","href","target","value","text","format","variants","length","reduce","previousValue","currentValue","defaultRenderText","reference","mimeType","mimetype","startsWith","path","defaultRenderImage","defaultTextFormat","bold","italic","underline","defaultHeaderStyle","h1","h2","h3","renderNodeList","childNodes","options","element","nodeMap","textFormat","headerStyle","content","nodeType","renderNode","isValidElement","cloneElement","Person","person","setPerson","name","personList","usePersonByName","useParams","profilePicture","_path","occupation","json","mapJsonRichText","biographyText","App","logo","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5c7759bf.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/wknd-icon.180f5e5f.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-loading.200bc7ed.svg\";","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n\n// Use the AEM Headless SDK to make the GraphQL requests\nimport AEMHeadless from \"@adobe/aem-headless-client-js\";\n\n// environment variable for configuring the headless client\nconst {\n  REACT_APP_HOST_URI,\n  REACT_APP_GRAPHQL_ENDPOINT,\n  REACT_APP_USE_PROXY,\n  REACT_APP_AUTH_METHOD,\n  REACT_APP_DEV_TOKEN,\n  REACT_APP_BASIC_AUTH_USER,\n  REACT_APP_BASIC_AUTH_PASS,\n} = process.env;\n\n// In a production application the serviceURL should be set to the production AEM Publish environment\n// In development the serviceURL can be set to '/' which will be a relative proxy is used (see ../authMethods.js) to avoid CORS issues\n\nconst serviceURL = REACT_APP_USE_PROXY === \"true\" ? \"/\" : REACT_APP_HOST_URI;\n\n// Get authorization based on environment variables\n// authorization is not needed when connecting to Publish environments\nconst setAuthorization = () => {\n  if (REACT_APP_AUTH_METHOD === \"basic\") {\n    return [REACT_APP_BASIC_AUTH_USER, REACT_APP_BASIC_AUTH_PASS];\n  } else if (REACT_APP_AUTH_METHOD === \"dev-token\") {\n    return REACT_APP_DEV_TOKEN;\n  } else {\n    // no authentication set\n    return;\n  }\n};\n\n// Initialize the AEM Headless Client and export it for other files to use\nconst aemHeadlessClient = new AEMHeadless({\n  serviceURL: serviceURL,\n  endpoint: REACT_APP_GRAPHQL_ENDPOINT,\n  auth: setAuthorization(),\n});\n\nexport default aemHeadlessClient;","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n\nimport aemHeadlessClient from \"./aemHeadlessClient\";\nimport { useEffect, useState } from \"react\";\n\n/**\n * This file contains the React useEffect custom hooks that:\n * 1. Are called by the React components\n * 2. To get data from AEM GraphQL persisted queries\n *\n * Each custom hook maps to a persisted query and is responsible for:\n * 1. Calling the AEM persisted query\n * 2. Collecting and transforming the returned data into the format expected by the React view components\n * 3. Setting and returning any error state\n */\n\n/**\n *  \n */\n\n/**\n * Private, shared function that invokes the AEM Headless client.\n * \n * @param {String} persistedQueryName the fully qualified name of the persisted query\n * @param {*} queryParameters an optional JavaScript object containing query parameters\n * @returns the GraphQL data or an error message \n */\nasync function fetchPersistedQuery(persistedQueryName, queryParameters) {\n  let data;\n  let err;\n\n  try {\n    // AEM GraphQL queries are asynchronous, either await their return or use Promise-based .then(..) { ... } syntax\n    const response = await aemHeadlessClient.runPersistedQuery(\n      persistedQueryName,\n      queryParameters\n    );\n    // The GraphQL data is stored on the response's data field\n    data = response?.data;\n  } catch (e) {\n    // An error occurred, return the error messages\n    err = e\n      .toJSON()\n      ?.map((error) => error.message)\n      ?.join(\", \");\n    console.error(e.toJSON());\n  }\n\n  return { data, err };\n}\n\n/**\n * Custom hook that calls the 'my-project/all-teams' persisted query.\n *\n * @returns an array of Team JSON objects, and array of errors\n */\nexport function useAllTeams() {\n  const [teams, setTeams] = useState(null);\n  const [errors, setErrors] = useState(null);\n\n  // Use React useEffect to manage state changes\n  useEffect(() => {\n    async function fetchData() {\n      // Call the AEM GraphQL persisted query named \"my-project/all-teams\"\n      const { data, err } = await fetchPersistedQuery(\"my-project/all-teams\");\n      // Sets the teams variable to the list of team JSON objects\n      setTeams(data?.teamList?.items);\n      // Set any errors\n      setErrors(err);\n    }\n    // Call the internal fetchData() as per React best practices\n    fetchData();\n  }, []);\n\n  // Returns the teams and errors\n  return { teams, errors };\n}\n\n/**\n * Calls the 'my-project/person-by-name' and provided the {fullName} as the persisted query's `name` parameter.\n *\n * @param {String!} fullName the full\n * @returns a JSON object representing the person\n */\nexport function usePersonByName(fullName) {\n  const [person, setPerson] = useState(null);\n  const [errors, setErrors] = useState(null);\n\n  useEffect(() => {\n    async function fetchData() {\n      // The key is the variable name as defined in the persisted query, and may not match the model's field name\n      const queryParameters = { name: fullName };\n      \n      // Invoke the persisted query, and pass in the queryParameters object as the 2nd parameter\n      const { data, err } = await fetchPersistedQuery(\n        \"my-project/person-by-name\",\n        queryParameters\n      );\n\n      if (err) {\n        // Capture errors from the HTTP request\n        setErrors(err);\n      } else if (data?.personList?.items?.length === 1) {\n        // Set the person data after data validation\n        setPerson(data.personList.items[0]);\n      } else {\n        // Set an error if no person could be found\n        setErrors(`Cannot find person with name: ${fullName}`);\n      }\n    }\n    fetchData();\n  }, [fullName]);\n\n  return { person, errors };\n}\n","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, { Component } from \"react\";\n\nclass Error extends Component {\n  render() {\n    return (\n      <div className=\"error\">\n        <span className=\"error__message\">{`Error: ${this.props.errorMessage}`}</span>\n      </div>\n    );\n  }\n}\n\nexport default Error;\n","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, { Component } from \"react\";\nimport loadingIcon from \"../images/icon-loading.svg\";\n\nclass Loading extends Component {\n  render() {\n    return (\n      <div className=\"loading\">\n        <img src={loadingIcon} alt=\"Loading...\" />\n      </div>\n    );\n  }\n}\n\nexport default Loading;\n","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useAllTeams } from \"../api/usePersistedQueries\";\nimport Error from \"./Error\";\nimport Loading from \"./Loading\";\nimport \"./Teams.scss\";\n\nfunction Teams() {\n  const { teams, error } = useAllTeams();\n\n  // Handle error and loading conditions\n  if (error) {\n    return <Error errorMessage={error} />;\n  } else if (!teams) {\n    return <Loading />;\n  }\n\n  // Teams have been populated by AEM GraphQL query. Display the teams.\n  return (\n    <div className=\"teams\">\n      {teams.map((team, index) => {\n        return <Team key={index} {...team} />;\n      })}\n    </div>\n  );\n}\n\n// Render single Team\nfunction Team({ title, shortName, description, teamMembers }) {\n  // Must have title, shortName and at least 1 team member\n  if (!title || !shortName || !teamMembers) {\n    return null;\n  }\n\n  return (\n    <div className=\"team\">\n      <h2 className=\"team__title\">{title}</h2>\n      <p className=\"team__description\">{description.plaintext}</p>\n      <div>\n        <h4 className=\"team__members-title\">Members</h4>\n        <ul className=\"team__members\">\n          {/* Render the referenced Person models associated with the team */}\n          {teamMembers.map((teamMember, index) => {\n            return (<li key={index} className=\"team__member\">\n                <Link to={`/person/${teamMember.fullName}`}>{teamMember.fullName}</Link>\n              </li>);\n          })}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default Teams;\n","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from \"react\";\nimport Teams from \"./Teams\";\nimport \"./Home.scss\";\n\n/***\n * Displays a grid of Team & People Link to find more details\n */\nfunction Home() {\n  return (\n    <div className=\"home\">\n      <h2 className=\"home__title\">WKND Teams</h2>\n      <Teams />\n    </div>\n  );\n}\n\nexport default Home;\n","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, { isValidElement, cloneElement } from \"react\";\n\n/**\n * This is utility class that renders the an AEM Content Fragment's multi-line textfield's JSON rendition.\n */\n\n/**\n * Map of JSON nodeTypes to HTML formats\n */\nconst defaultNodeMap = {\n  header: (node, children, style) => style[node.style]?.(node, children),\n  paragraph: (node, children) => <p>{children}</p>,\n  \"unordered-list\": (node, children) => <ul>{children}</ul>,\n  \"ordered-list\": (node, children) => <ol>{children}</ol>,\n  \"list-item\": (node, children) => <li>{children}</li>,\n  table: (node, children) => <table>{children}</table>,\n  \"table-body\": (node, children) => <tbody>{children}</tbody>,\n  \"table-row\": (node, children) => <tr>{children}</tr>,\n  \"table-data\": (node, children) => <td>{children}</td>,\n  link: (node) => (\n    <a href={node.data.href} target={node.data.target}>\n      {node.value}\n    </a>\n  ),\n  text: (node, format) => defaultRenderText(node, format),\n  reference: (node) => defaultRenderImage(node),\n};\n\n/**\n * Map of JSON format variants to HTML equivalents\n */\nconst defaultTextFormat = {\n  bold: (value) => <b>{value}</b>,\n  italic: (value) => <i>{value}</i>,\n  underline: (value) => <u>{value}</u>,\n};\n\n/**\n * Map of Header styles\n */\nconst defaultHeaderStyle = {\n  h1: (node, children) => <h1>{children}</h1>,\n  h2: (node, children) => <h2>{children}</h2>,\n  h3: (node, children) => <h3>{children}</h3>,\n};\n\n/**\n * Default renderer of Text nodeTypes\n * @param {*} node\n * @returns\n */\nfunction defaultRenderText(node, format) {\n  // iterate over variants array to append formatting\n  if (node.format?.variants?.length > 0) {\n    return node.format.variants.reduce((previousValue, currentValue) => {\n      return format[currentValue]?.(previousValue) ?? null;\n    }, node.value);\n  }\n  // if no formatting, simply return the value of the text\n  return node.value;\n}\n\n/**\n * Renders an image based on a reference\n * @param {*} node\n */\nfunction defaultRenderImage(node) {\n  const mimeType = node.data?.mimetype;\n  if (mimeType && mimeType.startsWith(\"image\")) {\n    return <img src={node.data.path} alt={\"reference\"} />;\n  }\n  return null;\n}\n\n/**\n * Appends a key to valid React Elements\n * (avoids having to pass an index everywhere)\n * @param {*} element\n * @param {*} key\n * @returns\n */\nfunction addKeyToElement(element, key) {\n  if (isValidElement(element) && element.key === null) {\n    return cloneElement(element, { key });\n  }\n  return element;\n}\n\n/**\n * Iterates over an array of nodes and renders each node\n * @param {*} childNodes array of\n * @returns\n */\nfunction renderNodeList(childNodes, options) {\n  if (childNodes && options) {\n    return childNodes.map((node, index) => {\n      return addKeyToElement(renderNode(node, options), index);\n    });\n  }\n\n  return null;\n}\n\n/**\n * Renders an individual node based on nodeType.\n * Makes a recursive call to render any children of the current node (node.content)\n * @param {*} node\n * @param {*} options\n * @returns\n */\nfunction renderNode(node, options) {\n  const { nodeMap, textFormat, headerStyle } = options;\n\n  // null check\n  if (!node || !options) {\n    return null;\n  }\n\n  const children = node.content ? renderNodeList(node.content, options) : null;\n\n  // special case for header, since it requires processing of header styles\n  if (node.nodeType === \"header\") {\n    return nodeMap[node.nodeType]?.(node, children, headerStyle);\n  }\n\n  // special case for text, since it may require formatting (i.e bold, italic, underline)\n  if (node.nodeType === \"text\") {\n    return nodeMap[node.nodeType]?.(node, textFormat);\n  }\n\n  // use a map to render the current node based on its nodeType\n  // pass the children (if they exist)\n  return nodeMap[node.nodeType]?.(node, children) ?? null;\n}\n\n/**\n * Expose the utility as a public function mapJsonRichText.\n * Calling functions can choose to override various mappings and/or formatting\n * by passing in an `options` object that may contain overrides for `nodeMap`, `textFormat` and `headerStyle`\n * @param {*} json - the json response of a Multi Line rich text field\n * @param {*} options {nodeMap,  - override defaultNodeMap\n *                     textFormat, - override defaultTextFormat\n *                     headerStyle, - override defaultHeaderStyle\n *                     }\n * @returns a JSX representation of the JSON object\n */\nexport function mapJsonRichText(json, options = {}) {\n  // merge options override with default options for nodeMap, textFormat, and headerStyle\n  return renderNodeList(json, {\n    nodeMap: {\n      ...defaultNodeMap,\n      ...options.nodeMap,\n    },\n    textFormat: {\n      ...defaultTextFormat,\n      ...options.textFormat,\n    },\n    headerStyle: {\n      ...defaultHeaderStyle,\n      ...options.headerStyle,\n    },\n  });\n}\n","/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { usePersonByName } from \"../api/usePersistedQueries\";\nimport { mapJsonRichText } from \"../utils/renderRichText\";\nimport Error from \"./Error\";\nimport Loading from \"./Loading\";\nimport \"./Person.scss\";\n\nfunction Person() {\n  // Read the person's `fullName` which is the parameter used to query for the person's details\n  const { fullName } = useParams();\n\n  // Query AEM for the Person's details, using the `fullName` as the filtering parameter\n  const { person, error } = usePersonByName(fullName);\n\n  // Handle error and loading conditions\n  if (error) {\n    return <Error errorMessage={error} />;\n  } else if (!person) {\n    return <Loading />;\n  }\n\n  return (\n    <div className=\"person\">\n      <img\n        className=\"person__image\"\n        src={process.env.REACT_APP_HOST_URI+person.profilePicture._path}\n        alt={person.fullName}\n      />\n      <div className=\"person__occupations\">\n        {person.occupation.map((occupation, index) => {\n          return (\n            <span key={index} className=\"person__occupation\">\n              {occupation}\n            </span>\n          );\n        })}\n      </div>\n      <div className=\"person__content\">\n        <h1 className=\"person__full-name\">{person.fullName}</h1>\n        <div className=\"person__biography\">\n          {/* Use this utility to transform multi-line text JSON into HTML */}\n          {mapJsonRichText(person.biographyText.json)}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Person;\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from \"react\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport logo from \"./images/wknd-icon.svg\";\nimport Home from \"./components/Home\";\nimport Person from \"./components/Person\";\nimport \"./App.scss\";\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <header>\n          <Link to={\"/\"}>\n            <img src={logo} className=\"logo\" alt=\"WKND Logo\" />\n          </Link>\n          <hr />\n        </header>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/person/:fullName\" element={<Person />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}